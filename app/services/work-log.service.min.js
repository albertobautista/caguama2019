!function(){"use strict";function e(r,n,e,a,s){var l=0,i=0,c=localStorage.baseurl,g={method:"",url:"",headers:{Authorization:localStorage.tokenkey,"Content-Type":"application/json; charset=UTF-8"}};return{get:t,post:function t(o){if(null!=t)return null!=c?(g.url=c+"/services/apexrest/t2go1/RegistroTrabajo/",g.method="post",i=0):(0==i?a.get().then(function(e){c=e.BASEURL,localStorage.setItem("baseurl",e.BASEURL),t(o)}):console.log("ERROR in work-log.service.js :::: BASEURL = NULL"),i++),r.post(g.url,o,g).then(function(e){return e.data}).catch(function(e){if("Unauthorized"!=e.statusText)return console.log("ERROR in work-log.service.js :::: POST"),console.log(e.data.message),s.error(e.data.message,"Notificación",{positionClass:"toast-top-center",closeButton:!1}),l=0,e;0==l&&n.get().then(function(e){l++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),g.headers.Authorization="Bearer "+e.TOKEN,t(o)})})},getWithId:function(e){if(null!=e.idStage)return null!=c?(g.url=c+"/services/apexrest/t2go1/RegistroTrabajo/?codigoagente="+localStorage.agentCode+"&todoslosregistros=0&idetapa="+e.idStage,g.method="get",i=0):(0==i?a.get().then(function(e){localStorage.setItem("baseurl",e.BASEURL),t()}):console.log("ERROR in work-log.service.js :::: BASEURL = NULL"),i++),r(g).then(function(e){return l=0,e.data}).catch(function(e){if("Unauthorized"==e.statusText){if(0!=l)return console.log("ERROR in work.log.service.js ::::: GET"),console.log(e),l=0,e;n.get().then(function(e){l++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),g.headers.Authorization="Bearer "+e.TOKEN,t()})}})},deleteWorklog:function t(e){null!=c?(g.url=c+"/services/apexrest/t2go1/RegistroTrabajo/?idWorklog="+e,g.method="delete",i=0):(0==i?a.get().then(function(e){localStorage.setItem("baseurl",e.BASEURL),t()}):console.log("ERROR in work-log.service.js :::: BASEURL = NULL"),i++);return r(g).then(function(e){return console.log("response"),console.log(e),l=0,e.data}).catch(function(e){if("Unauthorized"==e.statusText){if(0!=l)return console.log("ERROR in work-log.service.js ::::: DELETE"),console.log(e),s.error(e.data.message,"Notificación",{positionClass:"toast-top-center",closeButton:!1}),l=0,e;n.get().then(function(e){l++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),g.headers.Authorization="Bearer "+e.TOKEN,t()})}})}};function t(){return null!=c?(g.url=c+"/services/apexrest/t2go1/RegistroTrabajo/?codigoagente="+localStorage.agentCode+"&todoslosregistros=1",g.method="get",i=0):(0==i?a.get().then(function(e){localStorage.setItem("baseurl",e.BASEURL),t()}):console.log("ERROR in work-log.service.js :::: BASEURL = NULL"),i++),r(g).then(function(e){return l=0,e.data}).catch(function(e){if("Unauthorized"==e.statusText){if(0!=l)return console.log("ERROR in work-log.service.js ::::: GET ALL WORKLOGS"),console.log(e),l=0,e;n.get().then(function(e){l++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),g.headers.Authorization="Bearer "+e.TOKEN,t()})}})}}angular.module("app").factory("WorkLogService",e),e.$inject=["$http","TokenService","$mdToast","BaseUrlService","toastr"]}();