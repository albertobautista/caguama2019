!function(){"use strict";function e(e,r,n){var a=0,c=0,i=localStorage.baseurl,l={method:"get",url:"",headers:{Authorization:localStorage.tokenkey,"Content-Type":"application/json; charset=UTF-8"}};return{get:function t(o){null!=i?(l.url=i+"/services/apexrest/t2go1/Etapas/?codigoagente="+localStorage.agentCode+"&idproyecto="+o.idProject,c=0):(0==c?n.get().then(function(e){i=e.BASEURL,localStorage.setItem("baseurl",e.BASEURL),t(o)}):console.log("ERROR in stage.service.js :::: BASEURL = NULL"),c++);return e(l).then(function(e){return a=0,e.data}).catch(function(e){if("Unauthorized"==e.statusText){if(0!=a)return console.log("ERROR in logger.service.js"),console.log(e),a=0,e;r.get().then(function(e){a++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),l.headers.Authorization="Bearer "+e.TOKEN,t(o)})}})}}}angular.module("app").factory("StageService",e),e.$inject=["$http","TokenService","BaseUrlService"]}();