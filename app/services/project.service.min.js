!function(){"use strict";function e(e,n,r){var a=0,c=0,i=0,l=localStorage.baseurl,s={method:"get",url:"",headers:{Authorization:localStorage.tokenkey,"Content-Type":"application/json; charset=UTF-8"}};return{get:function t(o){null!=l?(null!=localStorage.agentCode?s.url=l+"/services/apexrest/t2go1/TipoProyectos/?codigoagente="+localStorage.agentCode+"&activo=1&tipoproyecto="+o.value:0==i?(i++,setTimeout(function(){t(o)},1e3)):1==i?(i++,setTimeout(function(){t(o)},1e3)):(console.log("ERROR in project.service.js :::: agentCode = NULL"),i=0,u()),c=0):(0==c?r.get().then(function(e){l=e.BASEURL,localStorage.setItem("baseurl",e.BASEURL),t(o)}):console.log("ERROR in project.service.js :::: BASEURL = NULL"),c++);return e(s).then(function(e){return a=0,e.data}).catch(function(e){if("Unauthorized"==e.statusText){if(0!=a)return console.log("ERROR in project.service.js"),a=0,e;n.get().then(function(e){a++,localStorage.setItem("tokenkey","Bearer "+e.TOKEN),s.headers.Authorization="Bearer "+e.TOKEN,t(o)})}else if("Bad Request"==e.statusText){if(0!=a)return console.log("ERROR in AgentCode"),a=0,e;n.get().then(function(e){a++,t(o)})}else if("Server Error"==e.statusText){if(0!=a)return console.log("ERROR"),a=0,e;n.get().then(function(e){a++,t(o)})}})}};function u(){toastr.error("Hubo un problema, reintenta por favor","Notificaci√≥n",{closeButton:!0,positionClass:"toast-bottom-left"}),localStorage.clear(),$state.go("home")}}angular.module("app").factory("ProjectService",e),e.inject=["$http","TokenService","BaseUrlService"]}();