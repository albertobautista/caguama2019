!function(){"use strict";function e(e,a,r,o,t,s,b,n,u,l){var h,i=this;function O(){return b.agentName=localStorage.name}function T(){return b.photo=localStorage.photo}function k(){return b.myGroup=localStorage.myGroup}function J(){return b.hours=localStorage.hours}i.worklogs={},i.hours=[],i.auth=a,i.selectedtype=null,b.setSpinnerLoad=!0,1==i.auth.isAuthenticated()?(b.periods=null,l.get().then(function(e){b.periods=e}),O(),b.$watch("vm.selectedperiod",function(){return b.myFunca(i.selectedperiod)})):i.auth.logout(),localStorage.setItem("check",!0),"true"==localStorage.check?(h=t.get(),localStorage.setItem("check",!1)):h=JSON.parse(localStorage.getItem("dsd")),b.myFunca=function(d){if(null!=d){d.value,d.name;return h.then(function(e){if(null!=e)if("Unauthorized"!=(e=JSON.parse(e)).statusText){for(var a=[],r=[],o=[],t=[],s=[],n=[],u=0;u<e[6].agentSummary.length;u++)a.push(e[6].agentSummary[u]);for(var l in a)for(var h in a[l])r.push(a[l][h]);for(var i in r)for(var c in r[i])o.push(r[i][c]);for(var i in o)for(var c in o[i])t.push(o[i][c].Proyectos),s.push(o[i][c].Horas),n.push(o[i][c].Porcentaje);"7"==d.value||"7"==d.value?(b.namePeriod="7 días",b.myNumberProject=t[6],b.myHoursProject=s[6],b.myPercentageProject=n[6],b.myProjectNumber=t[7],b.myProjectHours=s[7],b.myProjectPercentage=n[7]):"15"==d.value||"15"==d.value?(b.namePeriod="15 días",b.myNumberProject=t[4],b.myHoursProject=s[4],b.myPercentageProject=n[4],b.myProjectNumber=t[5],b.myProjectHours=s[5],b.myProjectPercentage=n[5]):"30"==d.value||"30"==d.value?(b.namePeriod="Mes",b.myNumberProject=t[2],b.myHoursProject=s[2],b.myPercentageProject=n[2],b.myProjectNumber=t[3],b.myProjectHours=s[3],b.myProjectPercentage=n[3]):"365"!=d.value&&"365"!=d.value||(b.namePeriod="Año",b.myNumberProject=t[0],b.myHoursProject=s[0],b.myPercentageProject=n[0],b.myProjectNumber=t[1],b.myProjectHours=s[1],b.myProjectPercentage=n[1])}else b.myFunca(d);else b.myFunca(d)})}},h.then(function(n){n=JSON.parse(n);for(var u=[],l=[],h=[],e=[],a=[],i=[],c=[],d=[],b=[],r=[],o=[],t=[],s=[],m=[],g=[],p=[],y=[],f=[],P=[],M=[],A=[],v=[],S=[],x=[],j=[],C=[],H=0;H<n[0].totalhoursxmonth.length;H++)u.push(n[0].totalhoursxmonth[H][H+1].horasDisponibles),l.push(n[0].totalhoursxmonth[H][H+1].horasRegistradas),h.push("rgba(100,32,119, 1)");for(var N=0;N<n[1].totalhoursxmonthxproyectYEAR.length;N++)r.push(n[1].totalhoursxmonthxproyectYEAR[N]);for(N=0;N<n[2].totalhoursxmonthxproyectMONTH.length;N++)o.push(n[2].totalhoursxmonthxproyectMONTH[N]);for(N=0;N<r.length;N++)t.push(r[N]);for(N=0;N<o.length;N++)s.push(o[N]);for(var E in t)for(var R in t[E])i.push(t[E][R].Nombre),c.push(t[E][R].Horas),e.push("rgba("+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", 1)");for(var E in s)for(var R in s[E])d.push(s[E][R].Nombre),b.push(s[E][R].Horas),a.push("rgba("+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", 1)");void 0!==d&&0!=d.length||(d.push("Sin registros"),b.push(0)),void 0!==i&&0!=i.length||(i.push("Sin registros"),c.push(0));for(H=0;H<n[3].totalhoursxstatusxYEAR.length;H++)m.push(n[3].totalhoursxstatusxYEAR[H].Aprobado),g.push(n[3].totalhoursxstatusxYEAR[H].Rechazado),p.push(n[3].totalhoursxstatusxYEAR[H].Pendiente),y.push("rgba("+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", 1)");for(H=0;H<n[4].totalhoursxstatusMONTH.length;H++)f.push(n[4].totalhoursxstatusMONTH[H].Aprobado),P.push(n[4].totalhoursxstatusMONTH[H].Rechazado),M.push(n[4].totalhoursxstatusMONTH[H].Pendiente),A.push("rgba("+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", "+Math.floor(255*Math.random()+1)+", 1)");for(H=0;H<n[5].totalhoursxmonthxSTATUS.length;H++)v.push(n[5].totalhoursxmonthxSTATUS[H][H+1].Aprobado),S.push(n[5].totalhoursxmonthxSTATUS[H][H+1].Rechazado),x.push(n[5].totalhoursxmonthxSTATUS[H][H+1].Pendiente),j.push("rgba(66,109,169, 1)"),C.push("rgba(100,32,119, 1)");$(document).ready(function(){var e=document.getElementById("myChart"),a=document.getElementById("myChartEstadoRegistrosMes"),r=document.getElementById("myChartDoughnutMonth"),o=document.getElementById("myChartDoughnutYear"),t=document.getElementById("myChartPieYear"),s=document.getElementById("myChartPieMonth");new Chart(a,{type:"bar",data:n,data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Horas Aprobadas",data:[v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11]],backgroundColor:j,borderColor:j},{label:"Horas Rechazadas",data:[S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11]],backgroundColor:C,borderColor:C,borderWidth:2,type:"bar"},{label:"Horas Pendientes",data:[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11]],borderWidth:2,type:"bar"}],labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},options:{easing:"easeOutSine",maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(e,{type:"bar",data:n,data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Horas Esperadas",data:[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11]]},{label:"Horas Aprobadas",data:[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11]],backgroundColor:h,borderColor:h,borderWidth:2,type:"bar"}],labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},options:{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(o,{type:"doughnut",data:n,cutoutPercentage:50,data:{labels:i,datasets:[{data:c,backgroundColor:["rgba(100,32,119, 1)","rgba(52,217,195, 1)","rgba(66,109,169, 1)","rgba(167,230,217, 1)","rgba(104,2,2, 1)","rgba(210,208,205,1)"],borderColor:["rgba(100,32,119, 1)","rgba(52,217,195, 1)","rgba(66,109,169, 1)","rgba(167,230,217, 1)","rgba(104,2,2, 1)","rgba(210,208,205,1)"]}]},options:{cutoutPercentage:50,maintainAspectRatio:!1}}),new Chart(r,{type:"doughnut",data:n,data:{labels:d,datasets:[{label:"Horas Esperadas",data:b,backgroundColor:["rgba(100,32,119, 1)","rgba(52,217,195, 1)","rgba(66,109,169, 1)","rgba(167,230,217, 1)","rgba(104,2,2, 1)","rgba(210,208,205,1)"],borderColor:["rgba(100,32,119, 1)","rgba(52,217,195, 1)","rgba(66,109,169, 1)","rgba(167,230,217, 1)","rgba(104,2,2, 1)","rgba(210,208,205,1)"]}]},options:{maintainAspectRatio:!1}}),new Chart(t,{type:"pie",data:n,data:{labels:["Aprobadas","Rechazadas","Pendientes"],datasets:[{label:"Horas Esperadas",data:[m[0],g[1],p[2]],backgroundColor:["rgba(66,109,169, 1)","rgba(100,32,119, 1)"],borderColor:["rgba(66,109,169, 1)","rgba(100,32,119, 1)"]}]},options:{maintainAspectRatio:!1}}),new Chart(s,{type:"pie",data:n,data:{labels:["Aprobadas","Rechazadas","Pendientes"],datasets:[{label:"Horas Esperadas",data:[[0],P[1],M[2]],backgroundColor:["rgarrayHorasAprobadasMesba(66,109,169, 1)","rgba(100,32,119, 1)"],borderColor:["rgba(66,109,169, 1)","rgba(100,32,119, 1)"]}]},options:{maintainAspectRatio:!1}})}),T(),O(),k(),J()}).catch(function(e){console.log(e)})}angular.module("app").controller("DashboardController",e).directive("loading",["$http",function(o){return{restrict:"A",link:function(e,a,r){e.isLoading=function(){return 0<o.pendingRequests.length},e.$watch(e.isLoading,function(e){if(e){try{angular.element("#details")[0].style.opacity="0"}catch(e){}a.show()}else{try{angular.element("#details")[0].style.opacity="1"}catch(e){}a.hide()}})}}}]),e.$inject=["$http","authService","$state","$filter","DashboardService","$localStorage","$scope","HoursService","ProjectService","PeriodService"]}();