!function(){"use strict";function t(t,e,a,o,n,r,s,l){var i=this;i.worklogs={},i.auth=a,1==i.auth.isAuthenticated()?r.get().then(function(t){JSON.stringify(t),$(document).ready(function(){$("#worklogs").DataTable({data:t,columns:[{data:"project"},{data:"stageName"},{data:"category"},{data:"workDate",date:"dd/MM/yyyy"},{data:"wroklogTime"},{data:"comment"},{data:"status"}],columnDefs:[{targets:0}],aaSorting:[3,"desc"],pageLength:10,info:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"}});var a=$("#example").DataTable({footerCallback:function(t,e,a,o,n){function r(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0}var s=this.api(),l=(s.column(4).data().reduce(function(t,e){return r(t)+r(e)},0),s.column(4,{page:"current"}).data().reduce(function(t,e){return r(t)+r(e)},0));$(s.column(4).footer()).html(l+" Horas")},responsive:!0,data:t,columns:[{data:"project"},{data:"stageName"},{data:"category"},{data:"workDate"},{data:"wroklogTime"},{data:"comment"},{data:"status"}],columnDefs:[{targets:7,data:t.idWorklog,defaultContent:"<center><i class='material-icons' style='cursor:pointer;'>delete</i></center>"},{targets:1,width:"20px"},{targets:5,render:function(t,e,a){return t.substr(0,20)+"…"}}],targets:4,createdRow:function(t,e,a){console.log(e.bDelete),0==e.bDelete&&$("td",t).eq(7).addClass("graybutton"),"Aprobado"===e.status||"Aprobado"==e.status?$("td",t).eq(6).addClass("approved"):"Rechazado"!==e.status&&"Rechazado"!=e.status||$("td",t).eq(6).addClass("rejected")},aaSorting:[3,"desc"],pageLength:10,info:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"}});$("#example tbody").on("click","i",function(){var t=a.row($(this).parents("tr")).data(),e=$(this).closest("tr");$("#example").DataTable().row(e).data(),function(t){$("#numeroRegistro").innerHTML=t.idWorklog,$("#numeroRegistroDOS").html("Hello World!"),$("#numeroRegistroDos").innerHTML="ewew",confirm("¿Deseas borrar el registro?")&&r.deleteWorklog(t.idWorklog).then(function(t){null!=t&&(1==t.success?l.success(t.message,"Notificación",{closeButton:!0,positionClass:"toast-bottom-left"}):l.error(t.message,"Notificación",{closeButton:!0,positionClass:"toast-bottom-left"}))})}(t)})})}).catch(function(t){console.log(t)}):i.auth.logout()}angular.module("app").controller("WorkLogController",t).directive("loading",["$http",function(o){return{restrict:"A",link:function(e,a,t){e.isLoading=function(){return 0<o.pendingRequests.length},e.$watch(e.isLoading,function(t){t?(angular.element("#formPrin")[0].style.opacity="0.4",e.globalCallout=!0,a.show()):(angular.element("#formPrin")[0].style.opacity="1",a.hide(),e.globalCallout=!1)})}}}]),t.$inject=["$http","$scope","authService","$state","$filter","WorkLogService","$localStorage","toastr"]}();