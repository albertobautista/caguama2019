!function(){"use strict";function t(t,a,e,o,n,r,s,i){var l=this;l.worklogs={},l.auth=e,1==l.auth.isAuthenticated()?r.get().then(function(t){JSON.stringify(t),$(document).ready(function(){$("#worklogs").DataTable({data:t,columns:[{data:"project"},{data:"stageName"},{data:"category"},{data:"workDate",date:"dd/MM/yyyy"},{data:"wroklogTime"},{data:"comment"},{data:"status"}],columnDefs:[{targets:0}],aaSorting:[3,"desc"],pageLength:10,info:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"}});var e=$("#example").DataTable({footerCallback:function(t,a,e,o,n){function r(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0}var s=this.api(),i=(s.column(4).data().reduce(function(t,a){return r(t)+r(a)},0),s.column(4,{page:"current"}).data().reduce(function(t,a){return r(t)+r(a)},0));$(s.column(4).footer()).html(i+" Horas")},responsive:!0,data:t,columns:[{data:"project"},{data:"stageName"},{data:"category"},{data:"workDate"},{data:"wroklogTime"},{data:"comment"},{data:"status"}],columnDefs:[{targets:7,data:t.idWorklog,defaultContent:"<center><i class='material-icons' style='cursor:pointer;'>delete</i></center>"},{targets:1,width:"20px"},{targets:5,render:function(t,a,e){return t.substr(0,20)+"…"}}],targets:4,createdRow:function(t,a,e){0==a.bDelete&&$("td",t).eq(7).addClass("graybutton"),"Aprobado"===a.status||"Aprobado"==a.status?$("td",t).eq(6).addClass("approved"):"Rechazado"!==a.status&&"Rechazado"!=a.status||$("td",t).eq(6).addClass("rejected")},aaSorting:[3,"desc"],pageLength:10,info:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"}});$("#example tbody").on("click","i",function(){var t=e.row($(this).parents("tr")).data(),a=$(this).closest("tr");$("#example").DataTable().row(a).data(),function(t){$("#numeroRegistro").innerHTML=t.idWorklog,$("#numeroRegistroDOS").html("Hello World!"),$("#numeroRegistroDos").innerHTML="ewew",confirm("¿Deseas borrar el registro?")&&r.deleteWorklog(t.idWorklog).then(function(t){null!=t&&(1==t.success?i.success(t.message,"Notificación",{closeButton:!0,positionClass:"toast-bottom-left"}):i.error(t.message,"Notificación",{closeButton:!0,positionClass:"toast-bottom-left"}))})}(t)})})}).catch(function(t){console.log(t)}):l.auth.logout()}angular.module("app").controller("WorkLogController",t).directive("loading",["$http",function(o){return{restrict:"A",link:function(a,e,t){a.isLoading=function(){return 0<o.pendingRequests.length},a.$watch(a.isLoading,function(t){if(t){try{angular.element("#formPrin")[0].style.opacity="0.4"}catch(t){}a.globalCallout=!0,e.show()}else{try{angular.element("#formPrin")[0].style.opacity="1"}catch(t){}e.hide(),a.globalCallout=!1}})}}}]),t.$inject=["$http","$scope","authService","$state","$filter","WorkLogService","$localStorage","toastr"]}();